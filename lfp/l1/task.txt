27. Магазин программ и игр
Программная система автоматизирует продажу программного обеспечения для персональных компьютеров и игровых консолей,
    позволяя осуществлять её онлайн

// Регистрация пользователей
Покупатели программ (пользователи) -> регистрируются в форме онлайн:
    Логин-email
    Пароль
    ФИО
    День рождения
    | форма заполнена верно
    | email не совпадает с email другого пользователя
    -> создание регистрационной записи о новом пользователе
    -> пользователь получает в свой электронный почтовый ящик сообщение для подтверждения e-mail со сгенерированным системой кодом
    -> для подтверждения email пользователь нажимает на ссылку из полученного по email сообщения
    -> по ссылке открывается форма, в которой заполняется логин, пароль и присланный код
    | все данные сообщены верно -> пользователь получает полноценный доступ к системе
        (пользователь может «входить» и получать доступ ко всем возможностям, предоставляемым зарегистрированному пользователю)

// Инфо о программе
О каждой продаваемой программе магазин хранит и предоставляет своим пользователям набор сведений:
    Уникальный каталожный номер
    Название программы
    Год издания
    Название издателя
    Язык
    Категория (системное ПО, прикладное ПО, игра)
    Авторы/создатели программы (один или более чем один)
Программа может предлагаться для разных операционных систем, разных платформ:
    PC-Windows
    PC-Linux
    PS4
    XBox One и др.
Цена одной и той же программы, приобретаемой для разных платформ в разных языковых версиях, может быть разной
Для каждой программы есть набор изображений-«скриншотов», сопровождаемых описанием
В магазине предлагаются пробные версии программ с усечённой функциональностью и/или коротким сроком использования
    Такую версию пользователь может заказать бесплатно

// Поиск программ
Пользователь, войдя в систему, может искать программы в каталоге магазина по одному или нескольким поисковым полям:
    Каталожному номеру
    Названию
    Году издания
    Названию издателя
    Категории
    Автору(ам)
Результаты поиска система выдаёт порциями (по 10 записей о программах)
Их можно сортировать в желаемом пользователю порядке (по возрастанию / убыванию):
    Цены
    Названия
    Даты поступления в продажу
    Рейтинга, вычисленного по оценкам пользователей, купивших программу ранее

// Добавление в корзину
Понравившиеся программы пользователь может поместить в «корзину», либо в список будущих покупок
Программа, помещённая в список будущих покупок, может быть либо удалена из него пользователем, либо перемещена им в «корзину»
При просмотре пользователем своей непустой «корзины», система сообщает пользователю:
    Весь перечень программ, помещённых туда
    Их цены и общую сумму «корзины»
Позиции «корзины», помещённые по ошибке, пользователь может удалить
Одна и та же программа может находиться в «корзине» дважды (трижды и т. п.)
    | пользователь хочет её приобрести в нескольких версиях для разных платформ и/или языков
По своей непустой корзине пользователь может сделать заказ, который должен быть им оплачен в течение 7-ми суток
По оформлении заказа система помечает его, как пока не оплаченный, и опустошает «корзину»

// Оплата заказа
Не оплаченные вовремя заказы пользователей система отменяет
Оплата заказа производится с помощью платёжной системы, с которой магазин взаимодействует через шлюз
При оплате система запрашивает сведения о банковской карте:
    Номер
    Срок действия
    Сведения о владельце
    Трёхзначный код защиты
    | сведения сообщены должным образом
    -> магазин передаёт полученные сведения и стоимость заказа в составе запроса на оплату через шлюз платёжной системы
    -> ответ на этот запрос может быть положительным или нет
        | попытка была неуспешной
        -> статус заказа не меняется, а пользователь должен попытаться оплатить заказ снова, в течение отведённого на оплату времени
    -> после удачной оплаты заказ помечается как оплаченный
    -> система направляет на электронную почту сообщение с перечнем ссылок на скачивание дистрибутивов всех заказанных программ
Помимо ссылок для каждой программы сообщается код активации, сгенерированный системой
Код активации используется при запуске используемых программ

Запускаемая программа по Интернет-соединению делает запрос в систему с указанием:
    Логина пользователя
    Кода активации 
    Каталожного номера программы
По результатам ответа системы на запрос программа делает вывод о легальности своего запуска и либо продолжает свою работу, либо завершает

Пользователь имеет доступ к списку всех своих заказов
С помощью него он может запросить повторную отправку сообщения со ссылкой и кодом активации для той или иной позиции оплаченного им заказа
Система не допускает повторного заказа программы, если та уже была приобретена пользователем ранее для той же платформы и языка
    (т. е. указана как позиция оплаченного пользователем заказа)
Приобретённой программе пользователь может указать оценку по шкале 0..10 в зависимости от того, насколько она ему понравилась

// Для работников магазина
Работники магазина:
    Поддерживают в актуальном состоянии сведения об программах, предлагаемых к покупке
    Размещают в магазине сведения о программах, которые пока не продаются, но вскоре могут поступить в продажу
        Чтобы заинтересованные пользователи могли:
            «Подписываться» на них
            Получать от магазина электронные письма о поступлении программ в продажу
    Могут по своему выбору приостанавливать действие регистрационных записей пользователей с большим количеством неоплаченных заказов
        На время приостановки действия регистрационной записи пользователь не может «входить» в систему
    Система предоставляет работникам магазина возможность ответить на сообщения пользователям
        Пользователь может оставить в системе сообщение:
            Об обнаруженной им неточности в сведениях о программе
            О затруднении, возникшем у негопри работе с системой
        Доставка этих ответов осуществляется по электронной почте

Все необходимые для работы сведения хранятся в самой системе, а не в каком-либо внешнем хранилище
Внешними по отношению к системе являются платёжная система, SMTP-сервер
